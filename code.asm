; Претпоставуваме дека POCPOLE е дефинирано како стартна мемориска локација
POCPOLE EQU 2000h    ; Поставете ја почетната адреса на POCPOLE
PORT_ADDR EQU 0FAh   ; Адреса на излезната порта

MVI H, 20h           ; Високиот бајт од адресата 2000h
MVI L, 00h           ; Нискиот бајт од адресата 2000h
MVI C, 0Ah           ; Број на податоци (10)

START:
MOV A, M             ; Читање на податокот од меморијата (HL)
ANI 88h              ; Маска за битовите 3 и 7 (10001000b)
CPI 08h              ; Споредба со 00001000b (битови 3 и 7 се 1 и 0)
JZ ADD_FIVE          ; Ако битовите 3 и 7 се 1 и 0, премини на ADD_FIVE
JMP MULT_THREE       ; Во спротивно, премини на MULT_THREE

ADD_FIVE:
MOV A, M             ; Повторно читање на податокот (оригиналната вредност)
ADI 05h              ; Собери со 5
OUT PORT_ADDR        ; Испрати на излезната порта
JMP NEXT             ; Премини на следниот податок

MULT_THREE:
MOV A, M             ; Повторно читање на податокот (оригиналната вредност)
MOV B, A             ; Чување на оригиналната вредност во B
ADD A               ; Удвои податокот (A = A * 2)
ADD B               ; Додавање на оригиналната вредност (A = A * 2 + B = A * 3)
OUT PORT_ADDR        ; Испрати на излезната порта

NEXT:
INX H               ; Поместување на HL на следната мемориска локација
DCR C               ; Намалување на бројачот
JNZ START           ; Ако не е завршено, повтори

HLT                 ; Стоп
